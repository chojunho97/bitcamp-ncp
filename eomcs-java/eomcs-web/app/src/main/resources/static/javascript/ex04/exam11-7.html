<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ex04</title>
</head>
<body>
<h1>생성자6 - 생성자 상속과 prototype 연결</h1>
<script>
"use strict"

//1) Object() 생성자와 prototype
let obj = new Object();
console.log(obj);
console.log("========================");

function Engine(valve, cylinder, cc) {
  //Object.call(this)
  this.valve = valve; //밸브
  this.cylinder = cylinder; //실린더
  this.cc = cc; // cc
}

Engine.prototype.print = function() {
  console.log("밸브: " + this.valve);
  console.log("실린더: " + this.cylinder);
  console.log("cc: " + this.cc);
};
//2) Engine() 생성자와 prototype
let e1 = new Engine(16, 4, 2000);
console.log(e1);
console.log(e1.toString());//Object.prototype.toString() 호출
e1.print();//Engine.prototype.print() 호출


//e1.test(); // 아직 Object.prototype에 test()가 없어서 실행 오류
//- 객체.test()찾기
//- Engine.prototype.test() 찾기
//- Object.prototype.test() 찾기
console.log("========================");


//상위 생성자의 prototype에 프로퍼티 추가
Object.prototype.test = function() {
  console.log("Object.test() 호출됨!");
};
e1.test();// OK!

//- 객체.test()찾기
//- Engine.prototype.test() 찾기
//- Object.prototype.test() 찾기
console.log("========================");

function Car(valve, cylinder, cc, capacity, auto) {
  // 상위 생성자를 명시적으로 호출한다.
  Engine.call(this, valve, cylinder, cc);

  this.light = false;
  this.capacity =capacity;
  this.auto = auto;
 
}



// Car.prototype.print = function() {
//   console.log("수용인원: " + this.capacity);
//   console.log("오토: " + this.auto);
// };

//예전 방식:
// => Car() 생성자가 Engine() 생성자를 상속 받을 때는
//    Car의 prototype도 Engine의 prototype도 상속 받아야 한다.
//    그래야만 Car()로 초기화시킨 객체에서 
//    Engine.prototype에 들어 있는 함수를 사용할 수 있다.
// => Engine의 prototype 객체를 복제해서 Car의 prototype 객체로 등록한다.


Car.prototype = Object.create(Engine.prototype);
//Engine 의 prototype을 복제해서
//Car의 prototype을 만들었기 때문에
//constructor가 Engine을 가리키고 있다.
//생성자 정보를 변경해줘야 한다.
//Car.prototype.constructor = Car;
console.log(Car.constructor);

Car.prototype.setLight = function(light) {
  this.light = light;
};

var c1 = new Car(16, 4, 2000, 5, true);
console.log(c1);
c1.setLight(true); // Car.prototype.setLight()
c1.toString();// Object.prototype.toString()
c1.test();//Object.prototype.test();
console.log(c1);
c1.print(); // 잘찾냐?
console.log(c1.toString());//Object.prototype.toString() 호출



</script>
</body>
</html>
